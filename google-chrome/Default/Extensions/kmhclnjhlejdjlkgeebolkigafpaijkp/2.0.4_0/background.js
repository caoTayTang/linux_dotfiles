(()=>{var e={2330:function(e){
/*!
 * chrome-promise
 * https://github.com/tfoxy/chrome-promise
 *
 * Copyright 2015 TomÃ¡s Fox
 * Released under the MIT license
 */
!function(t,r){e.exports=function(e){"use strict";var t=Array.prototype.slice,r=Object.prototype.hasOwnProperty;return o.default=o,o;function o(s){var n=(s=s||{}).chrome||e.chrome,a=s.Promise||e.Promise,i=n.runtime,c=this;if(!c)throw new Error("ChromePromise must be called with new keyword");function u(e,r){return function(){var o=t.call(arguments);return new a((function(s,n){function a(){var e=i.lastError,r=t.call(arguments);if(e)n(e);else switch(r.length){case 0:s();break;case 1:s(r[0]);break;default:s(r)}}o.push(a),e.apply(r,o)}))}}function l(e,t){for(var s in e)if(r.call(e,s)){var n;try{n=e[s]}catch(e){continue}var a=typeof n;"object"!==a||n instanceof o?t[s]="function"===a?u(n,e):n:(t[s]={},l(n,t[s]))}}function h(e){if(e.permissions&&e.permissions.length){var t={};e.permissions.forEach((function(e){var r=/^[^.]+/.exec(e);r in n&&(t[r]=n[r])})),l(t,c)}}l(n,c),n.permissions&&n.permissions.onAdded.addListener(h)}}(this||t)}("undefined"!=typeof self?self:this)},5764:(e,t,r)=>{var o=new(r(2330));o.default=o,e.exports=o},326:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function s(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var o,n,a=[];for(n in"string"!=typeof t&&(t="?"),e)if(r.call(e,n)){if((o=e[n])||null!=o&&!isNaN(o)||(o=""),n=s(n),o=s(o),null===n||null===o)continue;a.push(n+"="+o)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,s={};t=r.exec(e);){var n=o(t[1]),a=o(t[2]);null===n||null===a||n in s||(s[n]=a)}return s}},9896:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},6575:(e,t,r)=>{"use strict";var o=r(9896),s=r(326),n=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,i=/^[a-zA-Z]:/,c=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function u(e){return(e||"").toString().replace(c,"")}var l=[["#","hash"],["?","query"],function(e,t){return f(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function p(e){var t,o=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},s={},a=typeof(e=e||o);if("blob:"===e.protocol)s=new m(unescape(e.pathname),{});else if("string"===a)for(t in s=new m(e,{}),h)delete s[t];else if("object"===a){for(t in e)t in h||(s[t]=e[t]);void 0===s.slashes&&(s.slashes=n.test(e.href))}return s}function f(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function d(e,t){e=u(e),t=t||{};var r,o=a.exec(e),s=o[1]?o[1].toLowerCase():"",n=!!o[2],i=!!o[3],c=0;return n?i?(r=o[2]+o[3]+o[4],c=o[2].length+o[3].length):(r=o[2]+o[4],c=o[2].length):i?(r=o[3]+o[4],c=o[3].length):r=o[4],"file:"===s?c>=2&&(r=r.slice(2)):f(s)?r=o[4]:s?n&&(r=r.slice(2)):c>=2&&f(t.protocol)&&(r=o[4]),{protocol:s,slashes:n||f(s),slashesCount:c,rest:r}}function m(e,t,r){if(e=u(e),!(this instanceof m))return new m(e,t,r);var n,a,c,h,w,v,y=l.slice(),b=typeof t,g=this,q=0;for("object"!==b&&"string"!==b&&(r=t,t=null),r&&"function"!=typeof r&&(r=s.parse),n=!(a=d(e||"",t=p(t))).protocol&&!a.slashes,g.slashes=a.slashes||n&&t.slashes,g.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||i.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!f(g.protocol)))&&(y[3]=[/(.*)/,"pathname"]);q<y.length;q++)"function"!=typeof(h=y[q])?(c=h[0],v=h[1],c!=c?g[v]=e:"string"==typeof c?~(w=e.indexOf(c))&&("number"==typeof h[2]?(g[v]=e.slice(0,w),e=e.slice(w+h[2])):(g[v]=e.slice(w),e=e.slice(0,w))):(w=c.exec(e))&&(g[v]=w[1],e=e.slice(0,w.index)),g[v]=g[v]||n&&h[3]&&t[v]||"",h[4]&&(g[v]=g[v].toLowerCase())):e=h(e,g);r&&(g.query=r(g.query)),n&&t.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==t.pathname)&&(g.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=r.length,s=r[o-1],n=!1,a=0;o--;)"."===r[o]?r.splice(o,1):".."===r[o]?(r.splice(o,1),a++):a&&(0===o&&(n=!0),r.splice(o,1),a--);return n&&r.unshift(""),"."!==s&&".."!==s||r.push(""),r.join("/")}(g.pathname,t.pathname)),"/"!==g.pathname.charAt(0)&&f(g.protocol)&&(g.pathname="/"+g.pathname),o(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(h=g.auth.split(":"),g.username=h[0],g.password=h[1]||""),g.origin="file:"!==g.protocol&&f(g.protocol)&&g.host?g.protocol+"//"+g.host:"null",g.href=g.toString()}m.prototype={set:function(e,t,r){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||s.parse)(t)),n[e]=t;break;case"port":n[e]=t,o(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";n[e]=t.charAt(0)!==a?a+t:t}else n[e]=t;break;case"username":case"password":n[e]=encodeURIComponent(t);break;case"auth":var i=t.split(":");n.username=i[0],n.password=2===i.length?i[1]:""}for(var c=0;c<l.length;c++){var u=l[c];u[4]&&(n[u[1]]=n[u[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin="file:"!==n.protocol&&f(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(e){e&&"function"==typeof e||(e=s.stringify);var t,r=this,o=r.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var n=o+(r.protocol&&r.slashes||f(r.protocol)?"//":"");return r.username?(n+=r.username,r.password&&(n+=":"+r.password),n+="@"):r.password&&(n+=":"+r.password,n+="@"),n+=r.host+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(n+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(n+=r.hash),n}},m.extractProtocol=d,m.location=p,m.trimLeft=u,m.qs=s,e.exports=m}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(6575),t=r.n(e),o=e=>{var r=t()(e).pathname;return r.includes("/get_live_chat_replay")?"replay-live-chat":r.includes("/get_live_chat")?"live-chat":r.endsWith("/live_chat_replay")?"init-replay-live-chat":r.endsWith("/live_chat")?"init-live-chat":"normal"},s={on:!0,fontSize:16,opacity:.5,opacitySC:1,blur:0,show:!0,backgroundColor:{r:20,g:20,b:20},color:{r:255,g:255,b:255},chatFilter:{guest:!0,member:!0,superchat:!0,owner:!0,membership:!0,moderator:!0,sticker:!0},separateLine:!1,native:!1,size:{width:400,height:500},position:{top:50,left:50}},n=r(5764),a=r.n(n);var i=(e,t)=>{for(var r=Object.keys(t),o=Object.assign({},e),s=0,n=r;s<n.length;s++){var a=n[s];void 0===o[a]?o[a]=t[a]:"object"==typeof o[a]&&(o[a]=i(o[a],t[a]))}return o};function c(e,t,r,o,s,n,a){try{var i=e[n](a),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(o,s)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(o,s){var n=e.apply(t,r);function a(e){c(n,o,s,a,i,"next",e)}function i(e){c(n,o,s,a,i,"throw",e)}a(void 0)}))}}var l=(()=>{var e=[];return{store:e,add:(t,r)=>{e.some((e=>e.details.requestId===t))||e.push(r)},get:t=>e.filter((e=>e.details.requestId===t))[0],clear:()=>e=[],hasRequestId:t=>Object.keys(e).some((e=>e===t))}})(),h={urls:["https://www.youtube.com/*/get_live_chat?*","https://www.youtube.com/*/get_live_chat_replay?*"]},p={urls:["https://www.youtube.com/live_chat*","https://www.youtube.com/live_chat_replay*"]};function f(e){chrome.tabs.executeScript(e.tabId,{file:"inject.js",runAt:"document_idle"},(()=>{var t={details:e,type:o(e.url)};chrome.tabs.sendMessage(e.tabId,t)}))}function d(e){var t;0!==e.frameId&&(t=e.requestBody.raw?function(e){var t=e.map((e=>e.bytes.byteLength)),r=t.reduce(((e,t)=>e+t)),o=new Uint8Array(r);t.reduce(((t,r,s)=>(o.set(new Uint8Array(e[s].bytes),t),r)),0);var s=decodeURIComponent(String.fromCharCode.apply(null,Array.from(o)));return JSON.parse(s)}(e.requestBody.raw):void 0,l.add(e.requestId,{details:e,requestBody:t,type:o(e.url)}))}function m(e){if(0!==e.frameId){var t=l.get(e.requestId);t&&(t.requestHeaders=e.requestHeaders),chrome.tabs.sendMessage(e.tabId,t)}}function w(){chrome.webRequest.onCompleted.hasListener(f)||chrome.webRequest.onCompleted.addListener(f,p),chrome.webRequest.onBeforeRequest.hasListener(d)||chrome.webRequest.onBeforeRequest.addListener(d,h,["requestBody"]),chrome.webRequest.onBeforeSendHeaders.hasListener(m)||chrome.webRequest.onBeforeSendHeaders.addListener(m,h,["requestHeaders"])}chrome.runtime.onInstalled.addListener(u((function*(){var e=s,t=yield a().storage.local.get(null),r=i(t,e);yield a().storage.local.set(r)}))),chrome.storage.local.get(["on"],(e=>{e.on&&w()})),chrome.storage.onChanged.addListener((e=>{e.on&&(e.on.newValue?w():(chrome.webRequest.onCompleted.hasListener(f)&&chrome.webRequest.onCompleted.removeListener(f),chrome.webRequest.onBeforeRequest.hasListener(d)&&chrome.webRequest.onBeforeRequest.removeListener(d),chrome.webRequest.onBeforeSendHeaders.hasListener(m)&&chrome.webRequest.onBeforeSendHeaders.removeListener(m)))}))})()})();